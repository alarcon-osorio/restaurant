<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">

<header th:insert="includes/header :: header"> </header>
<header th:insert="includes/navbar :: navbar"> </header>

<div class="container mt-4 vj-destacados">
    <div class="row">
        <div class="col col-md-12 text-left mb-4" sec:authorize="isAuthenticated()">
            <div>
                <a class="font-weight-bold">Bienvenido: Mesero</a>
                <img src="https://i.pinimg.com/originals/6c/ed/a5/6ceda58e688c161b04800864a34988f6.jpg" width="45" height="45" class="d-inline-block align-top rounded-circle" alt="" loading="lazy">
                <p class="owner-subtext" href="#" ><a href="#">Cerrar Sesi√≥n</a></p>
            </div>
            <div class="btn-group" style="width:100%">
                <a th:href="@{/menu}" class="btn btn-outline-warning">Todos</a>
                <a th:each="menuTypeList : ${menuTypeList}" th:href="@{/type_menu(id=${menuTypeList.id})}"  th:text="${menuTypeList.name}" class="btn btn-outline-success"></a>
            </div>
            <br>
            <br>
            <div class="input-group mb-3">
                <input type="text" class="form-control" id="search" placeholder="Buscar platos..." aria-label="Recipient's username" aria-describedby="basic-addon2">
                <div class="input-group-append">
                    <button class="btn btn-outline-success" id="btn-search" type="button">buscar</button>
                </div>
            </div>
            <div class="salida"></div>
        </div>
    </div>
    <div class="row">
        <div th:each="menu : ${menu}" class="col-md-6  mb-4">
            <div class="card">
                <img th:src="${menu.image}" class="card-img-top" alt="...">
                <div class="card-body">
                    <h4 th:text="${menu.name}" class="card-title"></h4>
                    <h5 th:text="'$' + ${menu.price}" class="card-title"></h5>
                    <h6 th:text="${menu.description}" ></h6>
                </div>
                <div class="card-footer text-muted">
                    <a th:href="@{/accompaniment(menuId=${menu.id})}" th:text="'Seleccionar'" class="btn btn-primary"></a>
                </div>
            </div>
        </div>
    </div>
</div>
<footer th:insert="includes/footer :: footer"> </footer>
<script>
    $(document).ready(function(){
         $("#search").keyup(function(){
              var parametros="search="+$(this).val()
              $.ajax({
                 data:  parametros,
                  url:   'api/menu/10',
                  type:  'get',
                    beforeSend: function () { },
                    success:  function (response) {
                        var response = $(".salida").html(response);
                        log(response);
                  },
                  error:function(){
                       alert("error")
                    }
               });
         })
})
</script>
</html>